import{w as le,r as _,j as a,m as de,x as he,d as re,y as fe,B as ce,k as me,o as pe,S as $e,t as te,z as ne,A as G,v as ge,q as xe}from"./main-d0iSGHsx.js";import{I as ae,A as ye}from"./AnswerCard-BvPOJdBl.js";import{a as ve,b as Se,c as je,d as we,L as ie,T as Me}from"./WRAudio-DfnwZfcB.js";import"./rust_wasm-DLjsnXOY.js";var K={exports:{}},be=K.exports,oe;function De(){return oe||(oe=1,(function(f,z){(function(C,S){f.exports=S()})(be,(function(){var C=1e3,S=6e4,j=36e5,k="millisecond",O="second",w="minute",M="hour",b="day",A="week",g="month",q="quarter",D="year",F="date",Z="Invalid Date",X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var s=["th","st","nd","rd"],e=n%100;return"["+n+(s[(e-20)%10]||s[e]||s[0])+"]"}},$=function(n,s,e){var r=String(n);return!r||r.length>=s?n:""+Array(s+1-r.length).join(e)+n},L={s:$,z:function(n){var s=-n.utcOffset(),e=Math.abs(s),r=Math.floor(e/60),t=e%60;return(s<=0?"+":"-")+$(r,2,"0")+":"+$(t,2,"0")},m:function n(s,e){if(s.date()<e.date())return-n(e,s);var r=12*(e.year()-s.year())+(e.month()-s.month()),t=s.clone().add(r,g),i=e-t<0,o=s.clone().add(r+(i?-1:1),g);return+(-(r+(e-t)/(i?t-o:o-t))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:g,y:D,w:A,d:b,D:F,h:M,m:w,s:O,ms:k,Q:q}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},N="en",y={};y[N]=d;var W="$isDayjsObject",P=function(n){return n instanceof V||!(!n||!n[W])},I=function n(s,e,r){var t;if(!s)return N;if(typeof s=="string"){var i=s.toLowerCase();y[i]&&(t=i),e&&(y[i]=e,t=i);var o=s.split("-");if(!t&&o.length>1)return n(o[0])}else{var c=s.name;y[c]=s,t=c}return!r&&t&&(N=t),t||!r&&N},l=function(n,s){if(P(n))return n.clone();var e=typeof s=="object"?s:{};return e.date=n,e.args=arguments,new V(e)},u=L;u.l=I,u.i=P,u.w=function(n,s){return l(n,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var V=(function(){function n(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[W]=!0}var s=n.prototype;return s.parse=function(e){this.$d=(function(r){var t=r.date,i=r.utc;if(t===null)return new Date(NaN);if(u.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(X);if(o){var c=o[2]-1||0,h=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,h)):new Date(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,h)}}return new Date(t)})(e),this.init()},s.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},s.$utils=function(){return u},s.isValid=function(){return this.$d.toString()!==Z},s.isSame=function(e,r){var t=l(e);return this.startOf(r)<=t&&t<=this.endOf(r)},s.isAfter=function(e,r){return l(e)<this.startOf(r)},s.isBefore=function(e,r){return this.endOf(r)<l(e)},s.$g=function(e,r,t){return u.u(e)?this[r]:this.set(t,e)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(e,r){var t=this,i=!!u.u(r)||r,o=u.p(e),c=function(Y,x){var H=u.w(t.$u?Date.UTC(t.$y,x,Y):new Date(t.$y,x,Y),t);return i?H:H.endOf(b)},h=function(Y,x){return u.w(t.toDate()[Y].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(x)),t)},m=this.$W,p=this.$M,v=this.$D,U="set"+(this.$u?"UTC":"");switch(o){case D:return i?c(1,0):c(31,11);case g:return i?c(1,p):c(0,p+1);case A:var T=this.$locale().weekStart||0,R=(m<T?m+7:m)-T;return c(i?v-R:v+(6-R),p);case b:case F:return h(U+"Hours",0);case M:return h(U+"Minutes",1);case w:return h(U+"Seconds",2);case O:return h(U+"Milliseconds",3);default:return this.clone()}},s.endOf=function(e){return this.startOf(e,!1)},s.$set=function(e,r){var t,i=u.p(e),o="set"+(this.$u?"UTC":""),c=(t={},t[b]=o+"Date",t[F]=o+"Date",t[g]=o+"Month",t[D]=o+"FullYear",t[M]=o+"Hours",t[w]=o+"Minutes",t[O]=o+"Seconds",t[k]=o+"Milliseconds",t)[i],h=i===b?this.$D+(r-this.$W):r;if(i===g||i===D){var m=this.clone().set(F,1);m.$d[c](h),m.init(),this.$d=m.set(F,Math.min(this.$D,m.daysInMonth())).$d}else c&&this.$d[c](h);return this.init(),this},s.set=function(e,r){return this.clone().$set(e,r)},s.get=function(e){return this[u.p(e)]()},s.add=function(e,r){var t,i=this;e=Number(e);var o=u.p(r),c=function(p){var v=l(i);return u.w(v.date(v.date()+Math.round(p*e)),i)};if(o===g)return this.set(g,this.$M+e);if(o===D)return this.set(D,this.$y+e);if(o===b)return c(1);if(o===A)return c(7);var h=(t={},t[w]=S,t[M]=j,t[O]=C,t)[o]||1,m=this.$d.getTime()+e*h;return u.w(m,this)},s.subtract=function(e,r){return this.add(-1*e,r)},s.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||Z;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=u.z(this),c=this.$H,h=this.$m,m=this.$M,p=t.weekdays,v=t.months,U=t.meridiem,T=function(x,H,B,Q){return x&&(x[H]||x(r,i))||B[H].slice(0,Q)},R=function(x){return u.s(c%12||12,x,"0")},Y=U||function(x,H,B){var Q=x<12?"AM":"PM";return B?Q.toLowerCase():Q};return i.replace(ee,(function(x,H){return H||(function(B){switch(B){case"YY":return String(r.$y).slice(-2);case"YYYY":return u.s(r.$y,4,"0");case"M":return m+1;case"MM":return u.s(m+1,2,"0");case"MMM":return T(t.monthsShort,m,v,3);case"MMMM":return T(v,m);case"D":return r.$D;case"DD":return u.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return T(t.weekdaysMin,r.$W,p,2);case"ddd":return T(t.weekdaysShort,r.$W,p,3);case"dddd":return p[r.$W];case"H":return String(c);case"HH":return u.s(c,2,"0");case"h":return R(1);case"hh":return R(2);case"a":return Y(c,h,!0);case"A":return Y(c,h,!1);case"m":return String(h);case"mm":return u.s(h,2,"0");case"s":return String(r.$s);case"ss":return u.s(r.$s,2,"0");case"SSS":return u.s(r.$ms,3,"0");case"Z":return o}return null})(x)||o.replace(":","")}))},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(e,r,t){var i,o=this,c=u.p(r),h=l(e),m=(h.utcOffset()-this.utcOffset())*S,p=this-h,v=function(){return u.m(o,h)};switch(c){case D:i=v()/12;break;case g:i=v();break;case q:i=v()/3;break;case A:i=(p-m)/6048e5;break;case b:i=(p-m)/864e5;break;case M:i=p/j;break;case w:i=p/S;break;case O:i=p/C;break;default:i=p}return t?i:u.a(i)},s.daysInMonth=function(){return this.endOf(g).$D},s.$locale=function(){return y[this.$L]},s.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),i=I(e,r,!0);return i&&(t.$L=i),t},s.clone=function(){return u.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},n})(),se=V.prototype;return l.prototype=se,[["$ms",k],["$s",O],["$m",w],["$H",M],["$W",b],["$M",g],["$y",D],["$D",F]].forEach((function(n){se[n[1]]=function(s){return this.$g(s,n[0],n[1])}})),l.extend=function(n,s){return n.$i||(n(s,V,l),n.$i=!0),l},l.locale=I,l.isDayjs=P,l.unix=function(n){return l(1e3*n)},l.en=y[N],l.Ls=y,l.p={},l}))})(K)),K.exports}var Ce=De();const Oe=le(Ce),J={"sha256-pure":{label:"SHA256",icon:a.jsx(G,{className:"h-4 w-4"})},"sha512-pure":{label:"SHA512",icon:a.jsx(G,{className:"h-4 w-4"})},"sha256-default-salt":{label:"SHA256+默认盐",icon:a.jsx(G,{className:"h-4 w-4"})},"sha512-default-salt":{label:"SHA512+默认盐",icon:a.jsx(G,{className:"h-4 w-4"})},"sha256-salt":{label:"SHA256+自定义盐",icon:a.jsx(ne,{className:"h-4 w-4"}),hasCustomSalt:!0},"sha512-salt":{label:"SHA512+自定义盐",icon:a.jsx(ne,{className:"h-4 w-4"}),hasCustomSalt:!0}},ue=Object.keys(J).length;function E(f,z){const C=J[f],S=z[f];return S?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground shrink-0",children:[C.icon,a.jsx("span",{className:"text-sm whitespace-nowrap",children:C.label})]}),a.jsxs("div",{className:"flex-1 relative min-w-0",children:[a.jsx(Me,{readOnly:!0,value:S,className:"pr-8 font-mono text-xs w-full"}),a.jsx(ce,{size:"icon",variant:"ghost",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",onClick:()=>ge(S),"aria-label":"复制",children:a.jsx(xe,{className:"h-3 w-3"})})]})]},f):null}function _e(){const[f,z]=_.useState(null),[C,S]=_.useState(""),[j,k]=_.useState({}),[O,w]=_.useState(!1),M=_.useRef({...Object.fromEntries(Object.keys(J).map(d=>[d,!1]))}),[b,A]=_.useState(0),g=!f||O,q=f?`${f.size.toLocaleString()} 字节`:"",D=f?Oe(f.lastModified).format("YYYY-MM-DD HH:mm:ss"):"",F=d=>{const $=d.target.files?.[0]||null;d.target.value="",z($),k({})},Z=async()=>{if(!f){te.warning("请先选择文件");return}w(!0),M.current={...Object.fromEntries(Object.keys(J).map(d=>[d,!0]))},A(0);try{const d=await f.arrayBuffer(),$=new Uint8Array(d),L=new Worker(new URL("/wasm-re-hw/assets/fileShaWorker.worker-Wj65Jo13.js",import.meta.url),{type:"module"});L.onmessage=N=>{const{type:y,result:W,error:P,status:I}=N.data;k(I==="success"?l=>({...l,[y]:W}):l=>({...l,[y]:`计算失败: ${P}`})),M.current={...M.current,[y]:!1},A(l=>{const u=l+1;return u===ue&&(te.success("SHA 哈希计算完成",{description:`${f.name} 计算完成`}),w(!1)),u})},Object.entries(J).forEach(([N,y])=>{const W={id:crypto.randomUUID(),type:N,data:$,salt:y.hasCustomSalt?C:""};L.postMessage(W)})}catch(d){const $=d.message||d||"文件读取失败";console.error("文件读取失败:",d),te.error("文件读取失败",{description:$}),w(!1)}},X=_.useCallback(d=>{d.preventDefault(),d.stopPropagation();const $=d.dataTransfer.files?.[0];if($){const L=new File([$],$.name,{type:$.type,lastModified:$.lastModified});z(L),k({})}},[]),ee=_.useCallback(d=>{d.preventDefault(),d.stopPropagation()},[]);return a.jsx("div",{className:"min-h-screen bg-background text-foreground p-4 md:p-8",children:a.jsxs(de.div,{className:"max-w-6xl mx-auto space-y-4 md:space-y-8",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.2}}},children:[a.jsxs(ve,{className:"w-full",children:[a.jsx(Se,{children:a.jsxs(je,{className:"flex items-center gap-2 text-xl",children:[a.jsx(he,{}),"SHA 文件哈希演示"]})}),a.jsxs(we,{className:"space-y-6",children:[a.jsxs("div",{className:re("border-2 border-dashed rounded-lg p-6 text-center transition-colors",f?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"),onDrop:X,onDragOver:ee,children:[a.jsx(ae,{type:"file",onChange:F,className:"hidden",id:"file-upload",accept:""}),a.jsxs(ie,{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-2 md:gap-3 text-muted-foreground",children:[a.jsx(fe,{className:"h-8 w-8 text-muted-foreground"}),a.jsx("span",{children:f?f.name:"点击或拖拽文件到这里"}),f&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:q}),a.jsxs("span",{children:["上次修改日期：",D]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ie,{htmlFor:"salt",children:"盐值（Salt）"}),a.jsx(ae,{id:"salt",value:C,onChange:d=>S(d.target.value),placeholder:"可选，用于增强安全性",className:"font-mono"})]}),a.jsxs(ce,{onClick:Z,disabled:g,className:re("w-full flex gap-2",g&&"opacity-50 cursor-not-allowed"),children:[a.jsx(me,{}),O?a.jsxs(a.Fragment,{children:["计算中（已完成",b," / ",ue,"）...",a.jsx(pe,{className:"animate-spin w-4 h-4"})]}):"计算"]}),Object.keys(j).length>0&&a.jsxs(a.Fragment,{children:[a.jsx($e,{}),a.jsxs("div",{className:"space-y-3",children:[E("sha256-pure",j),E("sha512-pure",j),E("sha256-default-salt",j),E("sha512-default-salt",j),E("sha256-salt",j),E("sha512-salt",j)]})]})]})]}),a.jsx(ye,{inPage:"bytes"})]})})}export{_e as default};
