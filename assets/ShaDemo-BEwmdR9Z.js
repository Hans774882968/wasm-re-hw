import{r as c,j as s,m as C,D as i,B as f,d as y,k as A,S as H,t as k,v as F,q as R,z as p}from"./main-d0iSGHsx.js";import{I as j,A as T}from"./AnswerCard-BvPOJdBl.js";import{a as W,b as q,c as B,d as D,L as g,T as E}from"./WRAudio-DfnwZfcB.js";import{_ as I,i as L,j as O,k as z,l as M,m as P,n as $}from"./rust_wasm-DLjsnXOY.js";const w={"sha256-pure":{label:"SHA256",fn:a=>$(a),icon:s.jsx(i,{className:"h-4 w-4"})},"sha512-pure":{label:"SHA512",fn:a=>P(a),icon:s.jsx(i,{className:"h-4 w-4"})},"sha256-default-salt":{label:"SHA256+默认盐",fn:a=>M(a),icon:s.jsx(i,{className:"h-4 w-4"})},"sha512-default-salt":{label:"SHA512+默认盐",fn:a=>z(a),icon:s.jsx(i,{className:"h-4 w-4"})},"sha256-salt":{label:"SHA256+自定义盐",fn:(a,n)=>O(a,n),icon:s.jsx(p,{className:"h-4 w-4"}),hasCustomSalt:!0},"sha512-salt":{label:"SHA512+自定义盐",fn:(a,n)=>L(a,n),icon:s.jsx(p,{className:"h-4 w-4"}),hasCustomSalt:!0}};function U(){const[a,n]=c.useState(""),[m,S]=c.useState(""),[u,N]=c.useState({"sha256-pure":"","sha512-pure":"","sha256-default-salt":"","sha512-default-salt":"","sha256-salt":"","sha512-salt":""}),[h,_]=c.useState(!1),d=!a.trim()||!h;c.useEffect(()=>{async function e(){if(!h)try{await I(),_(!0)}catch(t){console.error("WASM 初始化失败",t),k.error("WASM 初始化失败",{description:t.message})}}e()},[h]);const b=()=>{if(d)return;const e={};for(const[t,l]of Object.entries(w)){const x=t;let o="";try{l.hasCustomSalt?o=l.fn(a,m):o=l.fn(a)}catch(v){console.error(`Sha hash calculation failed for ${x}:`,v),o="计算失败qwq"}e[x]=o}N(e)};function r(e){const t=w[e],l=u[e];return l?s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground shrink-0",children:[t.icon,s.jsx("span",{className:"text-sm whitespace-nowrap",children:t.label})]}),s.jsxs("div",{className:"flex-1 relative min-w-0",children:[s.jsx(E,{readOnly:!0,value:l,className:"pr-8 font-mono text-xs w-full"}),s.jsx(f,{size:"icon",variant:"ghost",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",onClick:()=>F(l),"aria-label":"复制",children:s.jsx(R,{className:"h-3 w-3"})})]})]},e):null}return s.jsx("div",{className:"min-h-screen bg-background text-foreground p-4 md:p-8",children:s.jsxs(C.div,{className:"max-w-6xl mx-auto space-y-4 md:space-y-8",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.2}}},children:[s.jsxs(W,{className:"w-full",children:[s.jsx(q,{children:s.jsxs(B,{className:"flex items-center gap-2 text-xl",children:[s.jsx(i,{}),"SHA哈希演示"]})}),s.jsxs(D,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"input",children:"明文"}),s.jsx(j,{id:"input",value:a,onChange:e=>n(e.target.value),placeholder:"请输入",className:"font-mono"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{htmlFor:"salt",children:"盐值（Salt）"}),s.jsx(j,{id:"salt",value:m,onChange:e=>S(e.target.value),placeholder:"可选，用于增强安全性",className:"font-mono"})]}),s.jsxs(f,{onClick:b,disabled:d,className:y("w-full flex gap-2",d&&"opacity-50 cursor-not-allowed"),children:[s.jsx(A,{}),"计算"]}),Object.values(u).some(e=>e)&&s.jsxs(s.Fragment,{children:[s.jsx(H,{}),s.jsxs("div",{className:"space-y-3",children:[r("sha256-pure"),r("sha512-pure"),r("sha256-default-salt"),r("sha512-default-salt"),r("sha256-salt"),r("sha512-salt")]})]})]})]}),s.jsx(T,{inPage:"str"})]})})}export{U as default};
